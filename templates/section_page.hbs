<div class="container-divider"></div>
<div class="container">
  <nav class="sub-nav">
    {{breadcrumbs}}
  </nav>

  <!-- Start of two-column layout with a gap between the boxes -->
  <div class="flex gap-6">

    <!-- Sidebar with sections, search bar, and link to support page -->
    <aside id="sections-list" class="w-1/4 p-4 bg-white border border-gray-300">
      <!-- Search Bar -->
      <div class="mb-4">
        <input type="text" class="w-full p-2 border border-gray-300 rounded-lg" placeholder="Search sections">
      </div>

      <h3 class="collapsible-sidebar-title sidenav-title mb-4 p-4 bg-gray-200 text-left">Sections</h3>

      <ul id="sections-sidebar" class="space-y-4 text-left">
        <!-- Sections will be dynamically injected via JavaScript -->
      </ul>

      <!-- Link back to support page -->
      <div class="mt-6">
        <a href="/support" class="text-blue-600 hover:text-black-400 block text-center">Back to Support Page</a>
      </div>
    </aside>

    <!-- Main content area in a white box with grey border -->
    <div class="w-3/4 bg-white border border-gray-300">
      <section id="main-content" class="section-content p-4">
        <!-- Full-width grey box behind the title -->
        <header class="page-header mb-6 p-4 bg-gray-200 text-left w-full">
          <h1 class="text-2xl font-bold">{{section.name}}</h1>
          {{#if section.description}}
            <p class="page-header-description">{{section.description}}</p>
          {{/if}}
        </header>

        <!-- Placeholder for dynamically loaded articles -->
        <div id="articles-list" class="space-y-4">
          <!-- Articles will be dynamically loaded here via JavaScript -->
        </div>
      </section>
    </div>
  </div>
</div>

<!-- JavaScript to Fetch and Inject Articles -->
<script>
  $(document).ready(function() {
    // Get the section ID from the page's data attribute or URL
    var sectionId = {{section.id}};

    // Fetch articles for the section
    $.getJSON('/api/v2/help_center/en-us/sections/' + sectionId + '/articles.json', function(data) {
      var articlesList = '';
      if (data.articles.length > 0) {
        $.each(data.articles, function(index, article) {
          articlesList += '<div class="article">' +
                          '<h2 class="article-tree-title text-xl font-semibold mb-4">' +
                          '<a href="' + article.html_url + '" class="text-gray-800 hover:text-gray-600">' + article.title + '</a>' +
                          '</h2>' +
                          '</div>';
        });
      } else {
        articlesList = '<p>No articles found in this section.</p>';
      }
      $('#articles-list').html(articlesList);
    });
  });
</script>
