<div class="container-divider"></div>
<div class="container">
  <nav class="sub-nav">
    {{breadcrumbs}}
  </nav>

  <!-- Start of two-column layout with a gap between the boxes -->
  <div class="flex gap-6">

    <!-- Sidebar with sections -->
    <aside id="sections-list" class="w-1/4 p-4 bg-white border border-gray-300">
      <h3 class="collapsible-sidebar-title sidenav-title mb-4 p-4 bg-gray-200 text-left">{{dc 'support_hub'}}</h3>

      <ul id="sections-sidebar" class="section-list">
        <!-- Sections will be dynamically injected via JavaScript -->
      </ul>

      <!-- Search box will be moved here with JavaScript -->
      <div id="search-box" class="mb-4">
        <input type="text" class="search-input" placeholder="Search sections">
      </div>
    </aside>

    <!-- Main content area in a white box with grey border -->
    <div class="w-3/4 bg-white border border-gray-300">
      <section id="main-content" class="section-content">
        <!-- Taller grey box behind the title with no white margins -->
        <header class="page-header mb-6 bg-gray-200 text-left w-full" style="height: 100px;">
          <h1 class="text-2xl font-bold">{{section.name}}</h1>
          {{#if section.description}}
            <p class="page-header-description">{{section.description}}</p>
          {{/if}}
        </header>

        <!-- Placeholder for dynamically loaded articles -->
        <div id="articles-list" class="article-list">
          <!-- Articles will be dynamically loaded here via JavaScript -->
        </div>
      </section>
    </div>
  </div>
</div>

<!-- Vanilla CSS Styling -->
<style>
  /* Ensure section titles are left-aligned with an icon */
  .section-list li {
    display: flex;
    align-items: center;
    padding: 10px;
    border: 1px solid transparent;
    cursor: pointer;
    text-align: left; /* Ensure text is left-aligned */
    list-style: none; /* Remove default list styling */
  }

  /* Icon styling for section titles */
  .section-list li::before {
    content: url('path_to_your_icon.svg'); /* Replace with your icon's path */
    margin-right: 8px;
    display: inline-block;
  }

  /* Hover effects with top and bottom borders */
  .section-list li:hover {
    border-top: 2px solid gray;
    border-bottom: 2px solid gray;
  }

  /* Remove white margins from the grey header background */
  .page-header {
    margin: 0;
    padding: 16px; /* Increase padding if needed for a taller header */
  }

  /* Add padding only to article titles */
  .page-header h1,
  .page-header-description {
    padding: 0 16px;
  }

  /* Make the grey header taller */
  .page-header {
    height: 100px; /* Adjust height to make the grey background taller */
  }

  /* Styling for search input */
  .search-input {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
  }
</style>

<!-- JavaScript to Fetch Section, Category, and Move Search Box -->
<script>
  $(document).ready(function() {
    // Get the section ID from the page's data attribute or URL
    var sectionId = {{section.id}};

    // Fetch the section details to retrieve category_id
    $.getJSON('/api/v2/help_center/en-us/sections/' + sectionId + '.json', function(sectionData) {
      var categoryId = sectionData.section.category_id;

      // Move the search box to the end of the section list
      $('#search-box').insertAfter('#sections-sidebar');

      // Fetch sections for the category
      $.getJSON('/api/v2/help_center/en-us/categories/' + categoryId + '/sections.json', function(data) {
        var sectionsList = '';
        if (data.sections.length > 0) {
          $.each(data.sections, function(index, section) {
            sectionsList += '<li>' +
                            '<a href="' + section.html_url + '" class="text-gray-800 hover:text-gray-600">' + section.name + '</a>' +
                            '</li>';
          });
        } else {
          sectionsList = '<p>No sections found in this category.</p>';
        }
        $('#sections-sidebar').html(sectionsList);
      });
    });
  });
</script>
